{"dependencies":[{"name":"tslib","loc":{"line":1,"column":25}},{"name":"../Subject","loc":{"line":2,"column":24}},{"name":"../Subscription","loc":{"line":3,"column":29}},{"name":"../util/lift","loc":{"line":4,"column":24}},{"name":"../observable/innerFrom","loc":{"line":5,"column":26}},{"name":"./OperatorSubscriber","loc":{"line":6,"column":41}},{"name":"../util/noop","loc":{"line":7,"column":21}},{"name":"../util/arrRemove","loc":{"line":8,"column":26}}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.windowToggle = windowToggle;\n\nvar _tslib = require(\"tslib\");\n\nvar _Subject = require(\"../Subject\");\n\nvar _Subscription = require(\"../Subscription\");\n\nvar _lift = require(\"../util/lift\");\n\nvar _innerFrom = require(\"../observable/innerFrom\");\n\nvar _OperatorSubscriber = require(\"./OperatorSubscriber\");\n\nvar _noop = require(\"../util/noop\");\n\nvar _arrRemove = require(\"../util/arrRemove\");\n\nfunction windowToggle(openings, closingSelector) {\n  return (0, _lift.operate)(function (source, subscriber) {\n    var windows = [];\n    var handleError = function (err) {\n      while (0 < windows.length) {\n        windows.shift().error(err);\n      }\n      subscriber.error(err);\n    };\n    (0, _innerFrom.innerFrom)(openings).subscribe((0, _OperatorSubscriber.createOperatorSubscriber)(subscriber, function (openValue) {\n      var window = new _Subject.Subject();\n      windows.push(window);\n      var closingSubscription = new _Subscription.Subscription();\n      var closeWindow = function () {\n        (0, _arrRemove.arrRemove)(windows, window);\n        window.complete();\n        closingSubscription.unsubscribe();\n      };\n      var closingNotifier;\n      try {\n        closingNotifier = (0, _innerFrom.innerFrom)(closingSelector(openValue));\n      } catch (err) {\n        handleError(err);\n        return;\n      }\n      subscriber.next(window.asObservable());\n      closingSubscription.add(closingNotifier.subscribe((0, _OperatorSubscriber.createOperatorSubscriber)(subscriber, closeWindow, _noop.noop, handleError)));\n    }, _noop.noop));\n    source.subscribe((0, _OperatorSubscriber.createOperatorSubscriber)(subscriber, function (value) {\n      var e_1, _a;\n      var windowsCopy = windows.slice();\n      try {\n        for (var windowsCopy_1 = (0, _tslib.__values)(windowsCopy), windowsCopy_1_1 = windowsCopy_1.next(); !windowsCopy_1_1.done; windowsCopy_1_1 = windowsCopy_1.next()) {\n          var window_1 = windowsCopy_1_1.value;\n          window_1.next(value);\n        }\n      } catch (e_1_1) {\n        e_1 = { error: e_1_1 };\n      } finally {\n        try {\n          if (windowsCopy_1_1 && !windowsCopy_1_1.done && (_a = windowsCopy_1.return)) _a.call(windowsCopy_1);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n    }, function () {\n      while (0 < windows.length) {\n        windows.shift().complete();\n      }\n      subscriber.complete();\n    }, handleError, function () {\n      while (0 < windows.length) {\n        windows.shift().unsubscribe();\n      }\n    }));\n  });\n}\n//# sourceMappingURL=windowToggle.js.map"},"hash":"5ce033c9e212ae6f4776af3eeed4f3ab"}