{"dependencies":[{"name":"../scheduler/async","loc":{"line":1,"column":31}},{"name":"../util/isDate","loc":{"line":2,"column":28}},{"name":"../util/lift","loc":{"line":3,"column":24}},{"name":"../observable/innerFrom","loc":{"line":4,"column":26}},{"name":"../util/createErrorClass","loc":{"line":5,"column":33}},{"name":"./OperatorSubscriber","loc":{"line":6,"column":41}},{"name":"../util/executeSchedule","loc":{"line":7,"column":32}}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TimeoutError = undefined;\nexports.timeout = timeout;\n\nvar _async = require(\"../scheduler/async\");\n\nvar _isDate = require(\"../util/isDate\");\n\nvar _lift = require(\"../util/lift\");\n\nvar _innerFrom = require(\"../observable/innerFrom\");\n\nvar _createErrorClass = require(\"../util/createErrorClass\");\n\nvar _OperatorSubscriber = require(\"./OperatorSubscriber\");\n\nvar _executeSchedule = require(\"../util/executeSchedule\");\n\nvar TimeoutError = exports.TimeoutError = (0, _createErrorClass.createErrorClass)(function (_super) {\n  return function TimeoutErrorImpl(info) {\n    if (info === void 0) {\n      info = null;\n    }\n    _super(this);\n    this.message = 'Timeout has occurred';\n    this.name = 'TimeoutError';\n    this.info = info;\n  };\n});\nfunction timeout(config, schedulerArg) {\n  var _a = (0, _isDate.isValidDate)(config) ? { first: config } : typeof config === 'number' ? { each: config } : config,\n      first = _a.first,\n      each = _a.each,\n      _b = _a.with,\n      _with = _b === void 0 ? timeoutErrorFactory : _b,\n      _c = _a.scheduler,\n      scheduler = _c === void 0 ? schedulerArg !== null && schedulerArg !== void 0 ? schedulerArg : _async.asyncScheduler : _c,\n      _d = _a.meta,\n      meta = _d === void 0 ? null : _d;\n  if (first == null && each == null) {\n    throw new TypeError('No timeout provided.');\n  }\n  return (0, _lift.operate)(function (source, subscriber) {\n    var originalSourceSubscription;\n    var timerSubscription;\n    var lastValue = null;\n    var seen = 0;\n    var startTimer = function (delay) {\n      timerSubscription = (0, _executeSchedule.executeSchedule)(subscriber, scheduler, function () {\n        try {\n          originalSourceSubscription.unsubscribe();\n          (0, _innerFrom.innerFrom)(_with({\n            meta: meta,\n            lastValue: lastValue,\n            seen: seen\n          })).subscribe(subscriber);\n        } catch (err) {\n          subscriber.error(err);\n        }\n      }, delay);\n    };\n    originalSourceSubscription = source.subscribe((0, _OperatorSubscriber.createOperatorSubscriber)(subscriber, function (value) {\n      timerSubscription === null || timerSubscription === void 0 ? void 0 : timerSubscription.unsubscribe();\n      seen++;\n      subscriber.next(lastValue = value);\n      each > 0 && startTimer(each);\n    }, undefined, undefined, function () {\n      if (!(timerSubscription === null || timerSubscription === void 0 ? void 0 : timerSubscription.closed)) {\n        timerSubscription === null || timerSubscription === void 0 ? void 0 : timerSubscription.unsubscribe();\n      }\n      lastValue = null;\n    }));\n    !seen && startTimer(first != null ? typeof first === 'number' ? first : +first - scheduler.now() : each);\n  });\n}\nfunction timeoutErrorFactory(info) {\n  throw new TimeoutError(info);\n}\n//# sourceMappingURL=timeout.js.map"},"hash":"f836b08d0aac04819b153c94a0a2908b"}